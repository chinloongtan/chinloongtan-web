{"pageProps":{"posts":[{"slug":"billing-for-aws-provisioned-iops","frontmatter":{"path":"/blog/billing-for-aws-provisioned-iops","date":"2018-05-02T11:59:02.962Z","title":"Billing for AWS Provisioned IOPS (io1)","excerpt":"Watch out before it's too late","tags":["aws"]},"content":"\nThis will be applicable for services with the rate that looks like this:\n\n$X per `provisioned IOPS-month`\n\nFor example, it could be `RDS` (Relational Database SErvice), or `EBS` (Elastic Block Store).\n\n![rate](rate.png)\n\nThe rate shown above is the rate for RDS of instance type `Provisioned IOPS SSD (io1) Volumes`.\n\nIf you have created the instance (or could be created by another service), but not sure what that means to your bill.\nChances are you might not need it, or otherwise, be prepared for a higher bill amount.\n\nHow the bill are calculated for provisioned IOPS-month type of instance:\n\n$0.11 * 1000 IOPS * number of hours\n\n= $110 for 1 month\n\n= $3.67 for 1 day\n\nThat's for 1000 IOPS for an instance.\n\n---\n\nAlso, please take note that:\n1. Provisioned IOPS SSD (io1) volumes are **not included** in the AWS Free Tier\n2. They are not charged by usage of I/O, but the **amount of IOPS enabled/provisioned**.\n\nSo if you enable an instance of 8000 IOPS of io1, but only used a bit of it, you will still be charged for\n\n$0.11 * 8000 * number of hours\n\n\n<br />\nPlus, there will be a charge for the storage rate. Refer to the image attached above.\n\n`$0.138 per GB-month`\n\n<br />\n\nSo, if you are not sure, probably a General Purpose SSD (gp2) volume is your right choice.\n\nRefer to the [EBS pricing](https://aws.amazon.com/ebs/pricing/) for another example. (the IOPS-month rate is applicable for RDS as well)\n\n\n","fullPath":"/Users/chinloong/makespace/chinloongtan-web/src/content/blog/2018/05/02-provisioned-iops-billing/index.md","timeToRead":2},{"slug":"aws-config-vs-aws-credentials","frontmatter":{"path":"/blog/aws-config-vs-aws-credentials","date":"2018-05-09T00:41:02.962Z","title":"aws/config vs aws/credentials","excerpt":"Get it right","tags":["aws"]},"content":"\nThere are time when you have multiple AWS access keys and secrets.\n\nEach key are able to access the AWS resources/services, depending on the given permissions.\n\nIdeally those keys only have access to the resources that are needed, nothing more.\n\nHowever, it might still happen that you are accessing the same services, but for different accounts.\n\nLet say pushing files to S3 bucket, but instead of pushing to your work/company AWS account, you want to push it to your personal one.\n\nSo you want to make sure you are passing in the right configurations for the command.\n\n#### AWS Profile\n\nWhat you are looking for is AWS *profile* management. (I made that up, but you get the idea.)\n\nYou can have a quick look at your current profiles using this command.\n\n```\n$ cat ~/.aws/config\n```\n\nWell, to save you some typings, here's mine.\n\n```\n[default]\nregion = ap-southeast-1\noutput = text\n\n[profile docker-repository]\nregion = us-west-2\n\n[profile eb-cli]\naws_access_key_id =\naws_secret_access_key =\n\n\n[profile chinloong]\naws_access_key_id =\naws_secret_access_key =\nregion = ap-southeast-1\n```\n\nYou guessed it right. **default** configurations will be used if no profile is spcified explicitly.\n\nNew profile can be created by following the pattern you can derived from the file.\n\n`[profile staging]`\n\n\nand passed it as an argument in the command as\n\n`--profile staging`\n\nFor example:\n\nI am trying to deploy files to S3 bucket to use it in static web hosting.\n\n```\ns3-deploy './public/**' --cwd './public/' --profile chinloong --bucket your-bucket-name --deleteRemoved --gzip\n```\n\nBad news is, it won't work.\n\nYou will probably get:\n\n```\n(node:82129) UnhandledPromiseRejectionWarning: Upload error: CredentialsError: Missing credentials in config (CredentialsError: Missing credentials in config\n```\n\n#### The missing part\n\n```\n$ cat ~/.aws/credentials\n```\n\nMake sure these two configs are there.\n\n```\naws_access_key_id =\naws_secret_access_key =\n```\n\nDid I mentioned about the profile name?\n\nBefore I forgot, you can specify the profile name those configs are for.\nBut watchout for the missing **profile** word.\n\n\nThe full block looks like this. (Instead of `[profile staging]`)\n\n```\n[staging]\naws_access_key_id =\naws_secret_access_key =\n```\n\nYou are now good to go!\n\n\n#### Explanation\n\nSo we have\n\n```\n~/.aws/config\n```\n\nand\n\n```\n~/.aws/credentials\n```\n\nIn short, use\n\n`~/.aws/credentials` for sensitive config like your access key and secret.\n\n\n`~/.aws/config` for less sensitive config like `region=us-west-2` or `max_concurrent_requests=10`\n\n\nHope that clears up things a bit for you! ðŸ˜€\n\nYou can also set the profile as environment variable.\n\n```AWS_PROFILE=staging s3-deploy ...```\n\n\nFull explanation?\n\nRead it here. [https://docs.aws.amazon.com/cli/latest/userguide/cli-config-files.html](https://docs.aws.amazon.com/cli/latest/userguide/cli-config-files.html)\n\nand here [https://docs.aws.amazon.com/cli/latest/topic/config-vars.html](https://docs.aws.amazon.com/cli/latest/topic/config-vars.html)\n","fullPath":"/Users/chinloong/makespace/chinloongtan-web/src/content/blog/2018/05/07-aws-config-vs-aws-credentials/index.md","timeToRead":2}],"totalCount":2,"tag":"aws"},"__N_SSG":true}