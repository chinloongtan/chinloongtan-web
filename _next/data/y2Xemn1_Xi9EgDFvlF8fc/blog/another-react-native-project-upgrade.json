{"pageProps":{"post":{"content":"\nWhile the latest released version for `react-native` is `0.67.2`, I upgraded the project that I am working on to `0.66.4` instead.\n\nThis is mainly due to some issues that I ran into that I decided not to spend too much time fixing it since `0.66.4` is sufficient for my use case.\n\nIn this blog, I will be sharing some of the issues that I ran into and the solutions for them. Hopefully someone might find it useful, and I can also refer to this blog in the near future if I need to upgrade other projects.\n\n<br />\n\n#### The issues\n\n1. folly\n\n```\n\nduplicate symbol 'folly::detail::str_to_bool(folly::Range<char const*>*)' in:\n...\n...\n```\n\nIn my case, I need to do\n\n```\npod update\npod install\n```\n\nNormally you need to run `pod update` after update `react-native` version\n\nor in some cases\n\n```\nrm -rf Podfile.lock Pods/\npod install\n```\n\nif you thing you have messed up the `Pods` after upgrading to different `react-native` versions back and forth.\n\n2. `#<WeakSet> could not be cloned`\n\nThen you might get this issue for any library.\n\n```\nerror node_modules/react-native-vector-icons/lib/create-icon-set.js: #<WeakSet> could not be cloned.\n\nerror: node_modules/react-native-branch/src/branchUniversalObject.js: function (path) {\n          return fn.call(state, path, state);\n        } could not be cloned.\n BUNDLE  ./index.js\n ```\n\nThis has to do with `babel`, so you need to upgrade them as well.\n\n```\nyarn upgrade --dev @babel/core\nyarn upgrade --dev @babel/runtime\n```\n\n3. Android project could not resolve dependencies\n\nError:\n\n```\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nCould not determine the dependencies of task ':app:lintVitalBetaRelease'.\n> Could not resolve all artifacts for configuration ':app:betaDebugRuntimeClasspath'.\n   > Could not resolve me.relex:photodraweeview:1.1.3.\n     Required by:\n         project :app > project :react-native-photo-view-ex\n      > Skipped due to earlier error\n   > Could not resolve org.webrtc:google-webrtc:1.0.+.\n     Required by:\n         project :app > project :react-native-twilio-video-webrtc\n      > Skipped due to earlier error\n   > Could not resolve com.yqritc:android-scalablevideoview:1.0.4.\n     Required by:\n         project :app > project :react-native-video\n      > Skipped due to earlier error\n   > Could not resolve com.getkeepsafe.relinker:relinker:1.3.1.\n     Required by:\n         project :app > project :react-native-twilio-video-webrtc > com.twilio:video-android:5.10.0\n      > Skipped due to earlier error\n```\n\nAnother error:\n```\nCould not determine the dependencies of task ':app:lintVitalRelease'.\n> Could not resolve all artifacts for configuration ':app:debugRuntimeClasspath'.\n   > Could not find com.yqritc:android-scalablevideoview:1.0.4.\n     Searched in the following locations:\n       - https://repo.maven.apache.org/maven2/com/yqritc/android-scalablevideoview/1.0.4/android-scalablevideoview-1.0.4.pom\n\n```\n\nThis is due to removal of the line `jcenter()` in `android/build.gradle`. Moving forward, JCenter will not be maintained.\n\nSo it is recommended to remove the depencencies to the repository.\n\n[Read more about the announcement here.](https://reactnative.dev/blog/2021/08/17/version-065#notable-dependency-version-updates-and-gotchas)\n\nAt the meantime, we have libraries that depends on JCenter and it's going to take time for maintainers to update the libraries.\n\nSo we can do this for now for the dependencies we need.\n\n```\n        jcenter() {\n            content {\n                includeModule(\"me.relex\", \"photodraweeview\") // Could not resolve me.relex:photodraweeview:1.1.3.\n                includeModule(\"org.webrtc\", \"google-webrtc\") // Could not resolve org.webrtc:google-webrtc:1.0.+.\n                includeModule(\"com.yqritc\", \"android-scalablevideoview\") // Could not resolve com.yqritc:android-scalablevideoview:1.0.4.\n                includeModule(\"com.getkeepsafe.relinker\", \"relinker\") // Could not resolve com.getkeepsafe.relinker:relinker:1.3.1.\n            }\n        }\n```\n\nSo now you get the idea of using `includeModule`.\n\nThat's all for the issues.\n\nHope that saves your precious time!\n\nCheers.","frontmatter":{"path":"/blog/another-react-native-project-upgrade","date":"2022-02-08T22:02:00.000Z","title":"Another react-native project upgrade","excerpt":"To 0.66.4","tags":["react-native"]},"fullPath":"/Users/chinloong/makespace/chinloongtan-web/src/content/blog/2022/02/08-upgrade-react-native/index.md","timeToRead":3}},"__N_SSG":true}