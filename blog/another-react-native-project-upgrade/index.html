<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/assets/favicon.png"/><meta name="keywords" content="react native, experienced, developer"/><title>Chin Loong Tan - Another react-native project upgrade</title><meta name="title" content="Chin Loong Tan - Another react-native project upgrade"/><meta name="description" content="To 0.66.4"/><meta name="next-head-count" content="10"/><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><link rel="preload" href="/_next/static/css/f5c400db6fc9a907.css" as="style"/><link rel="stylesheet" href="/_next/static/css/f5c400db6fc9a907.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-8a88c3eb9d38442d.js" defer=""></script><script src="/_next/static/chunks/framework-73b8966a3c579ab0.js" defer=""></script><script src="/_next/static/chunks/main-292e4726b4fd03ef.js" defer=""></script><script src="/_next/static/chunks/pages/_app-c164f2c72b92c6a5.js" defer=""></script><script src="/_next/static/chunks/b2e984c5-c6fb7c92049cce55.js" defer=""></script><script src="/_next/static/chunks/601-597bb24ff23733d9.js" defer=""></script><script src="/_next/static/chunks/675-7b1b173673ee7f53.js" defer=""></script><script src="/_next/static/chunks/518-ca43922f1257f114.js" defer=""></script><script src="/_next/static/chunks/822-db57bad4b081872d.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-d80ce2949967c7ab.js" defer=""></script><script src="/_next/static/yEFpG8O4mfNGks4pz90gv/_buildManifest.js" defer=""></script><script src="/_next/static/yEFpG8O4mfNGks4pz90gv/_ssgManifest.js" defer=""></script><style data-href="https://fonts.googleapis.com/css?family=Raleway:400,500,700&display=swap">@font-face{font-family:'Raleway';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptxg8zYS_SKggPN4iEgvnHyvveLxVvaorCIPrc.woff) format('woff')}@font-face{font-family:'Raleway';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptxg8zYS_SKggPN4iEgvnHyvveLxVvoorCIPrc.woff) format('woff')}@font-face{font-family:'Raleway';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptxg8zYS_SKggPN4iEgvnHyvveLxVs9pbCIPrc.woff) format('woff')}@font-face{font-family:'Raleway';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptug8zYS_SKggPNyCAIT4ttDfCmxA.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Raleway';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptug8zYS_SKggPNyCkIT4ttDfCmxA.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Raleway';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptug8zYS_SKggPNyCIIT4ttDfCmxA.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Raleway';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptug8zYS_SKggPNyCMIT4ttDfCmxA.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Raleway';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptug8zYS_SKggPNyC0IT4ttDfA.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Raleway';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptug8zYS_SKggPNyCAIT4ttDfCmxA.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Raleway';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptug8zYS_SKggPNyCkIT4ttDfCmxA.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Raleway';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptug8zYS_SKggPNyCIIT4ttDfCmxA.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Raleway';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptug8zYS_SKggPNyCMIT4ttDfCmxA.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Raleway';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptug8zYS_SKggPNyC0IT4ttDfA.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Raleway';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptug8zYS_SKggPNyCAIT4ttDfCmxA.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Raleway';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptug8zYS_SKggPNyCkIT4ttDfCmxA.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Raleway';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptug8zYS_SKggPNyCIIT4ttDfCmxA.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Raleway';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptug8zYS_SKggPNyCMIT4ttDfCmxA.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Raleway';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptug8zYS_SKggPNyC0IT4ttDfA.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body><div id="__next"><div class="blog-post-container content"><nav class="bg-white fixed top-0 left-0 w-full shadow flex items-center z-50" style="height:64px"><div class="relative flex-1 flex"><button type="button" class="p-4"><svg viewBox="0 0 24 24" style="width:1.5rem;height:1.5rem" role="presentation"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" style="fill:currentColor"></path></svg></button><div class="flex flex-1 text-xl font-medium items-center"><a href="/blog" class="">BLOG</a></div></div><div class="hidden md:hidden absolute bg-white w-full" style="top:64px"><a href="https://mvphub.app/" target="_blank" class="px-4 py-4 block border-t">SHOP</a><a href="/blog" target="_self" class="px-4 py-4 block border-t">BLOG</a><a href="/about" target="_self" class="px-4 py-4 block border-t">ABOUT</a></div></nav><div class="p-4 md:px-16 md:py-8 lg:px-32"><h2 class="font-bold text-2xl">Another react-native project upgrade</h2><h6 class="text-md" style="color:#576366">9 February 2022</h6><h6 class="text-lg" style="color:#576366">To 0.66.4</h6><div style="flex-direction:row;display:flex;margin-top:10px;font-size:14px;flex-wrap:wrap"><a style="margin-right:10px;background-color:rgba(72, 52, 212, 0.3);padding:5px;padding-left:8px;padding-right:8px;border-radius:6px;font-family:Raleway;text-decoration:none;color:#4834d4" class="font-medium" href="/tags/react-native/">react-native<!-- --> </a></div><hr class="my-8"/><div class="prose lg:prose-xl"><p>While the latest released version for <code style="background-color:rgba(0,0,0,.04);padding-top:3px;padding-bottom:3px">react-native</code> is <code style="background-color:rgba(0,0,0,.04);padding-top:3px;padding-bottom:3px">0.67.2</code>, I upgraded the project that I am working on to <code style="background-color:rgba(0,0,0,.04);padding-top:3px;padding-bottom:3px">0.66.4</code> instead.</p>
<p>This is mainly due to some issues that I ran into that I decided not to spend too much time fixing it since <code style="background-color:rgba(0,0,0,.04);padding-top:3px;padding-bottom:3px">0.66.4</code> is sufficient for my use case.</p>
<p>In this blog, I will be sharing some of the issues that I ran into and the solutions for them. Hopefully someone might find it useful, and I can also refer to this blog in the near future if I need to upgrade other projects.</p>
<br/>
<h4>The issues</h4>
<ol>
<li>folly</li>
</ol>
<pre><code class="undefined hljs">
duplicate symbol <span class="hljs-symbol">&#x27;folly</span>::detail::<span class="hljs-title function_ invoke__">str_to_bool</span>(folly::Range&lt;<span class="hljs-type">char</span> <span class="hljs-keyword">const</span>*&gt;*)&#x27; <span class="hljs-keyword">in</span>:
...
...
</code></pre>
<p>In my case, I need to do</p>
<pre><code class="undefined hljs">pod update
pod <span class="hljs-keyword">install</span>
</code></pre>
<p>Normally you need to run <code style="background-color:rgba(0,0,0,.04);padding-top:3px;padding-bottom:3px">pod update</code> after update <code style="background-color:rgba(0,0,0,.04);padding-top:3px;padding-bottom:3px">react-native</code> version</p>
<p>or in some cases</p>
<pre><code class="undefined hljs"><span class="hljs-built_in">rm</span> -rf Podfile.lock Pods/
pod install
</code></pre>
<p>if you thing you have messed up the <code style="background-color:rgba(0,0,0,.04);padding-top:3px;padding-bottom:3px">Pods</code> after upgrading to different <code style="background-color:rgba(0,0,0,.04);padding-top:3px;padding-bottom:3px">react-native</code> versions back and forth.</p>
<ol start="2">
<li><code style="background-color:rgba(0,0,0,.04);padding-top:3px;padding-bottom:3px">#&lt;WeakSet&gt; could not be cloned</code></li>
</ol>
<p>Then you might get this issue for any library.</p>
<pre><code class="undefined hljs"><span class="hljs-keyword">error </span>node_modules/react-native-vector-icons/lib/create-icon-set.js: #&lt;WeakSet&gt; could not be cloned.

<span class="hljs-keyword">error: </span>node_modules/react-native-branch/src/branchUniversalObject.js: function (path) {
          return fn.call(state, path, state);
        } could not be cloned.
 BUNDLE  ./index.js
</code></pre>
<p>This has to do with <code style="background-color:rgba(0,0,0,.04);padding-top:3px;padding-bottom:3px">babel</code>, so you need to upgrade them as well.</p>
<pre><code class="undefined hljs"><span class="hljs-attribute">yarn</span> upgrade --dev <span class="hljs-variable">@babel</span>/core
yarn upgrade --dev <span class="hljs-variable">@babel</span>/runtime
</code></pre>
<ol start="3">
<li>Android project could not resolve dependencies</li>
</ol>
<p>Error:</p>
<pre><code class="undefined hljs">
<span class="hljs-symbol">FAILURE:</span> <span class="hljs-title class_">Build</span> failed <span class="hljs-keyword">with</span> an exception.

* <span class="hljs-title class_">What</span> went <span class="hljs-symbol">wrong:</span>
<span class="hljs-title class_">Could</span> <span class="hljs-keyword">not</span> determine the dependencies of task <span class="hljs-string">&#x27;:app:lintVitalBetaRelease&#x27;</span>.
&gt; <span class="hljs-title class_">Could</span> <span class="hljs-keyword">not</span> resolve all artifacts <span class="hljs-keyword">for</span> configuration <span class="hljs-string">&#x27;:app:betaDebugRuntimeClasspath&#x27;</span>.
   &gt; <span class="hljs-title class_">Could</span> <span class="hljs-keyword">not</span> resolve <span class="hljs-symbol">me.relex:</span><span class="hljs-symbol">photodraweeview:</span><span class="hljs-number">1.1</span>.<span class="hljs-number">3</span>.
     <span class="hljs-title class_">Required</span> <span class="hljs-symbol">by:</span>
         project <span class="hljs-symbol">:app</span> &gt; project <span class="hljs-symbol">:react-native-photo-view-ex</span>
      &gt; <span class="hljs-title class_">Skipped</span> due to earlier error
   &gt; <span class="hljs-title class_">Could</span> <span class="hljs-keyword">not</span> resolve <span class="hljs-symbol">org.webrtc:</span>google-<span class="hljs-symbol">webrtc:</span><span class="hljs-number">1.0</span>.+.
     <span class="hljs-title class_">Required</span> <span class="hljs-symbol">by:</span>
         project <span class="hljs-symbol">:app</span> &gt; project <span class="hljs-symbol">:react-native-twilio-video-webrtc</span>
      &gt; <span class="hljs-title class_">Skipped</span> due to earlier error
   &gt; <span class="hljs-title class_">Could</span> <span class="hljs-keyword">not</span> resolve <span class="hljs-symbol">com.yqritc:</span>android-<span class="hljs-symbol">scalablevideoview:</span><span class="hljs-number">1.0</span>.<span class="hljs-number">4</span>.
     <span class="hljs-title class_">Required</span> <span class="hljs-symbol">by:</span>
         project <span class="hljs-symbol">:app</span> &gt; project <span class="hljs-symbol">:react-native-video</span>
      &gt; <span class="hljs-title class_">Skipped</span> due to earlier error
   &gt; <span class="hljs-title class_">Could</span> <span class="hljs-keyword">not</span> resolve <span class="hljs-symbol">com.getkeepsafe.relinker:</span><span class="hljs-symbol">relinker:</span><span class="hljs-number">1.3</span>.<span class="hljs-number">1</span>.
     <span class="hljs-title class_">Required</span> <span class="hljs-symbol">by:</span>
         project <span class="hljs-symbol">:app</span> &gt; project <span class="hljs-symbol">:react-native-twilio-video-webrtc</span> &gt; <span class="hljs-symbol">com.twilio:</span>video-<span class="hljs-symbol">android:</span><span class="hljs-number">5.10</span>.<span class="hljs-number">0</span>
      &gt; <span class="hljs-title class_">Skipped</span> due to earlier error
</code></pre>
<p>Another error:</p>
<pre><code class="undefined hljs">Could not determine the dependencies of task <span class="hljs-string">&#x27;:app:lintVitalRelease&#x27;</span>.
&gt; Could not resolve all artifacts <span class="hljs-keyword">for</span> configuration <span class="hljs-string">&#x27;:app:debugRuntimeClasspath&#x27;</span>.
   &gt; Could not find com.yqritc:android-scalablevideoview:<span class="hljs-number">1.0</span>.<span class="hljs-number">4</span>.
     Searched <span class="hljs-keyword">in</span> the following locations:
       - https:<span class="hljs-regexp">//</span>repo.maven.apache.org<span class="hljs-regexp">/maven2/</span>com<span class="hljs-regexp">/yqritc/</span>android-scalablevideoview<span class="hljs-regexp">/1.0.4/</span>android-scalablevideoview-<span class="hljs-number">1.0</span>.<span class="hljs-number">4</span>.pom

</code></pre>
<p>This is due to removal of the line <code style="background-color:rgba(0,0,0,.04);padding-top:3px;padding-bottom:3px">jcenter()</code> in <code style="background-color:rgba(0,0,0,.04);padding-top:3px;padding-bottom:3px">android/build.gradle</code>. Moving forward, JCenter will not be maintained.</p>
<p>So it is recommended to remove the depencencies to the repository.</p>
<p><a href="https://reactnative.dev/blog/2021/08/17/version-065#notable-dependency-version-updates-and-gotchas">Read more about the announcement here.</a></p>
<p>At the meantime, we have libraries that depends on JCenter and it&#x27;s going to take time for maintainers to update the libraries.</p>
<p>So we can do this for now for the dependencies we need.</p>
<pre><code class="undefined hljs">        jcenter<span class="hljs-literal">()</span> {
            content {
                <span class="hljs-keyword">include</span><span class="hljs-constructor">Module(<span class="hljs-string">&quot;me.relex&quot;</span>, <span class="hljs-string">&quot;photodraweeview&quot;</span>)</span> <span class="hljs-comment">// Could not resolve me.relex:photodraweeview:1.1.3.</span>
                <span class="hljs-keyword">include</span><span class="hljs-constructor">Module(<span class="hljs-string">&quot;org.webrtc&quot;</span>, <span class="hljs-string">&quot;google-webrtc&quot;</span>)</span> <span class="hljs-comment">// Could not resolve org.webrtc:google-webrtc:1.0.+.</span>
                <span class="hljs-keyword">include</span><span class="hljs-constructor">Module(<span class="hljs-string">&quot;com.yqritc&quot;</span>, <span class="hljs-string">&quot;android-scalablevideoview&quot;</span>)</span> <span class="hljs-comment">// Could not resolve com.yqritc:android-scalablevideoview:1.0.4.</span>
                <span class="hljs-keyword">include</span><span class="hljs-constructor">Module(<span class="hljs-string">&quot;com.getkeepsafe.relinker&quot;</span>, <span class="hljs-string">&quot;relinker&quot;</span>)</span> <span class="hljs-comment">// Could not resolve com.getkeepsafe.relinker:relinker:1.3.1.</span>
            }
        }
</code></pre>
<p>So now you get the idea of using <code style="background-color:rgba(0,0,0,.04);padding-top:3px;padding-bottom:3px">includeModule</code>.</p>
<p>That&#x27;s all for the issues.</p>
<p>Hope that saves your precious time!</p>
<p>Cheers.</p></div></div><footer class="p-4 md:p-8 lg:p-16"><div class=""><h4 class="text-xl mb-4">Contact me via:</h4><a href="https://www.linkedin.com/in/chinloongtan" target="_blank" rel="noopener noreferrer" style="color:white" class="flex items-center"><div class="w-10"><svg viewBox="0 0 24 24" style="width:1.5rem;height:1.5rem" role="presentation"><path d="M19 3A2 2 0 0 1 21 5V19A2 2 0 0 1 19 21H5A2 2 0 0 1 3 19V5A2 2 0 0 1 5 3H19M18.5 18.5V13.2A3.26 3.26 0 0 0 15.24 9.94C14.39 9.94 13.4 10.46 12.92 11.24V10.13H10.13V18.5H12.92V13.57C12.92 12.8 13.54 12.17 14.31 12.17A1.4 1.4 0 0 1 15.71 13.57V18.5H18.5M6.88 8.56A1.68 1.68 0 0 0 8.56 6.88C8.56 5.95 7.81 5.19 6.88 5.19A1.69 1.69 0 0 0 5.19 6.88C5.19 7.81 5.95 8.56 6.88 8.56M8.27 18.5V10.13H5.5V18.5H8.27Z" style="fill:currentColor"></path></svg></div>chinloongtan</a><div class="mb-0 mt-2 text-white"><a href="mailto:me@chinloongtan.com?body=Hi Chin Loong,
" style="color:white" class="flex items-center"><div class="w-10"><svg viewBox="0 0 24 24" style="width:1.5rem;height:1.5rem" role="presentation"><path d="M22 6C22 4.9 21.1 4 20 4H4C2.9 4 2 4.9 2 6V18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V6M20 6L12 11L4 6H20M20 18H4V8L12 13L20 8V18Z" style="fill:currentColor"></path></svg></div>me@chinloongtan.com</a></div></div><div class="mt-6 md:mt-16"><h4 class="text-xl mb-4">Or Buy Me A Coffee:</h4><a href="https://www.buymeacoffee.com/chinloongtan" target="_blank" rel="noopener noreferrer" style="color:white" class="flex items-center"><div class="w-10"><svg viewBox="0 0 24 24" style="width:1.5rem;height:1.5rem" role="presentation"><path d="M2,21V19H20V21H2M20,8V5H18V8H20M20,3A2,2 0 0,1 22,5V8A2,2 0 0,1 20,10H18V13A4,4 0 0,1 14,17H8A4,4 0 0,1 4,13V3H20M16,5H6V13A2,2 0 0,0 8,15H14A2,2 0 0,0 16,13V5Z" style="fill:currentColor"></path></svg></div>chinloongtan</a></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"content":"\nWhile the latest released version for `react-native` is `0.67.2`, I upgraded the project that I am working on to `0.66.4` instead.\n\nThis is mainly due to some issues that I ran into that I decided not to spend too much time fixing it since `0.66.4` is sufficient for my use case.\n\nIn this blog, I will be sharing some of the issues that I ran into and the solutions for them. Hopefully someone might find it useful, and I can also refer to this blog in the near future if I need to upgrade other projects.\n\n\u003cbr /\u003e\n\n#### The issues\n\n1. folly\n\n```\n\nduplicate symbol 'folly::detail::str_to_bool(folly::Range\u003cchar const*\u003e*)' in:\n...\n...\n```\n\nIn my case, I need to do\n\n```\npod update\npod install\n```\n\nNormally you need to run `pod update` after update `react-native` version\n\nor in some cases\n\n```\nrm -rf Podfile.lock Pods/\npod install\n```\n\nif you thing you have messed up the `Pods` after upgrading to different `react-native` versions back and forth.\n\n2. `#\u003cWeakSet\u003e could not be cloned`\n\nThen you might get this issue for any library.\n\n```\nerror node_modules/react-native-vector-icons/lib/create-icon-set.js: #\u003cWeakSet\u003e could not be cloned.\n\nerror: node_modules/react-native-branch/src/branchUniversalObject.js: function (path) {\n          return fn.call(state, path, state);\n        } could not be cloned.\n BUNDLE  ./index.js\n ```\n\nThis has to do with `babel`, so you need to upgrade them as well.\n\n```\nyarn upgrade --dev @babel/core\nyarn upgrade --dev @babel/runtime\n```\n\n3. Android project could not resolve dependencies\n\nError:\n\n```\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nCould not determine the dependencies of task ':app:lintVitalBetaRelease'.\n\u003e Could not resolve all artifacts for configuration ':app:betaDebugRuntimeClasspath'.\n   \u003e Could not resolve me.relex:photodraweeview:1.1.3.\n     Required by:\n         project :app \u003e project :react-native-photo-view-ex\n      \u003e Skipped due to earlier error\n   \u003e Could not resolve org.webrtc:google-webrtc:1.0.+.\n     Required by:\n         project :app \u003e project :react-native-twilio-video-webrtc\n      \u003e Skipped due to earlier error\n   \u003e Could not resolve com.yqritc:android-scalablevideoview:1.0.4.\n     Required by:\n         project :app \u003e project :react-native-video\n      \u003e Skipped due to earlier error\n   \u003e Could not resolve com.getkeepsafe.relinker:relinker:1.3.1.\n     Required by:\n         project :app \u003e project :react-native-twilio-video-webrtc \u003e com.twilio:video-android:5.10.0\n      \u003e Skipped due to earlier error\n```\n\nAnother error:\n```\nCould not determine the dependencies of task ':app:lintVitalRelease'.\n\u003e Could not resolve all artifacts for configuration ':app:debugRuntimeClasspath'.\n   \u003e Could not find com.yqritc:android-scalablevideoview:1.0.4.\n     Searched in the following locations:\n       - https://repo.maven.apache.org/maven2/com/yqritc/android-scalablevideoview/1.0.4/android-scalablevideoview-1.0.4.pom\n\n```\n\nThis is due to removal of the line `jcenter()` in `android/build.gradle`. Moving forward, JCenter will not be maintained.\n\nSo it is recommended to remove the depencencies to the repository.\n\n[Read more about the announcement here.](https://reactnative.dev/blog/2021/08/17/version-065#notable-dependency-version-updates-and-gotchas)\n\nAt the meantime, we have libraries that depends on JCenter and it's going to take time for maintainers to update the libraries.\n\nSo we can do this for now for the dependencies we need.\n\n```\n        jcenter() {\n            content {\n                includeModule(\"me.relex\", \"photodraweeview\") // Could not resolve me.relex:photodraweeview:1.1.3.\n                includeModule(\"org.webrtc\", \"google-webrtc\") // Could not resolve org.webrtc:google-webrtc:1.0.+.\n                includeModule(\"com.yqritc\", \"android-scalablevideoview\") // Could not resolve com.yqritc:android-scalablevideoview:1.0.4.\n                includeModule(\"com.getkeepsafe.relinker\", \"relinker\") // Could not resolve com.getkeepsafe.relinker:relinker:1.3.1.\n            }\n        }\n```\n\nSo now you get the idea of using `includeModule`.\n\nThat's all for the issues.\n\nHope that saves your precious time!\n\nCheers.","frontmatter":{"path":"/blog/another-react-native-project-upgrade","date":"2022-02-08T22:02:00.000Z","title":"Another react-native project upgrade","excerpt":"To 0.66.4","tags":["react-native"]},"fullPath":"/Users/chinloong/makespace/chinloongtan-web/src/content/blog/2022/02/08-upgrade-react-native/index.md","timeToRead":3}},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"another-react-native-project-upgrade"},"buildId":"yEFpG8O4mfNGks4pz90gv","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>