<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/assets/favicon.png"/><meta name="keywords" content="react native, experienced, developer"/><title>Chin Loong Tan - aws/config vs aws/credentials</title><meta name="title" content="Chin Loong Tan - aws/config vs aws/credentials"/><meta name="description" content="Get it right"/><meta name="next-head-count" content="10"/><link rel="preload" as="style" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"/><link rel="preload" as="font" type="font/woff2" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><link rel="preload" href="/_next/static/css/e4f251e73990d43c.css" as="style"/><link rel="stylesheet" href="/_next/static/css/e4f251e73990d43c.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-2d6c20b89449f43d.js" defer=""></script><script src="/_next/static/chunks/framework-36098b990598bc0c.js" defer=""></script><script src="/_next/static/chunks/main-a3243aca410ca0a4.js" defer=""></script><script src="/_next/static/chunks/pages/_app-af6203bf58fb8260.js" defer=""></script><script src="/_next/static/chunks/856-a2806ee1642bfbaa.js" defer=""></script><script src="/_next/static/chunks/674-34b4b08e45e656fc.js" defer=""></script><script src="/_next/static/chunks/767-0180798ec2644e62.js" defer=""></script><script src="/_next/static/chunks/675-e08c64594a2462bd.js" defer=""></script><script src="/_next/static/chunks/822-7d44f87f2ae1b1f9.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-c24900d7549fda12.js" defer=""></script><script src="/_next/static/0YF2trXFA7_OjzYqoBEJO/_buildManifest.js" defer=""></script><script src="/_next/static/0YF2trXFA7_OjzYqoBEJO/_ssgManifest.js" defer=""></script><style data-href="https://fonts.googleapis.com/css?family=Raleway:400,500,700&display=swap">@font-face{font-family:'Raleway';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptxg8zYS_SKggPN4iEgvnHyvveLxVvaorCIPrc.woff) format('woff')}@font-face{font-family:'Raleway';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptxg8zYS_SKggPN4iEgvnHyvveLxVvoorCIPrc.woff) format('woff')}@font-face{font-family:'Raleway';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptxg8zYS_SKggPN4iEgvnHyvveLxVs9pbCIPrc.woff) format('woff')}@font-face{font-family:'Raleway';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptug8zYS_SKggPNyCAIT4ttDfCmxA.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Raleway';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptug8zYS_SKggPNyCkIT4ttDfCmxA.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Raleway';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptug8zYS_SKggPNyCIIT4ttDfCmxA.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Raleway';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptug8zYS_SKggPNyCMIT4ttDfCmxA.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Raleway';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptug8zYS_SKggPNyC0IT4ttDfA.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Raleway';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptug8zYS_SKggPNyCAIT4ttDfCmxA.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Raleway';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptug8zYS_SKggPNyCkIT4ttDfCmxA.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Raleway';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptug8zYS_SKggPNyCIIT4ttDfCmxA.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Raleway';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptug8zYS_SKggPNyCMIT4ttDfCmxA.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Raleway';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptug8zYS_SKggPNyC0IT4ttDfA.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Raleway';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptug8zYS_SKggPNyCAIT4ttDfCmxA.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Raleway';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptug8zYS_SKggPNyCkIT4ttDfCmxA.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Raleway';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptug8zYS_SKggPNyCIIT4ttDfCmxA.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Raleway';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptug8zYS_SKggPNyCMIT4ttDfCmxA.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Raleway';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptug8zYS_SKggPNyC0IT4ttDfA.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body><div id="__next"><div class="blog-post-container content"><div class="custom-nav"><style data-emotion="css k008qs">.css-k008qs{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}</style><div class="MuiBox-root css-k008qs"><style data-emotion="css 13x2oq7">.css-13x2oq7{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;box-sizing:border-box;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;position:fixed;z-index:1100;top:0;left:auto;right:0;background-color:#1976d2;color:#fff;}@media print{.css-13x2oq7{position:absolute;}}</style><style data-emotion="css 5poeop">.css-5poeop{background-color:#fff;color:rgba(0, 0, 0, 0.87);-webkit-transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;box-shadow:0px 2px 4px -1px rgba(0,0,0,0.2),0px 4px 5px 0px rgba(0,0,0,0.14),0px 1px 10px 0px rgba(0,0,0,0.12);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;box-sizing:border-box;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;position:fixed;z-index:1100;top:0;left:auto;right:0;background-color:#1976d2;color:#fff;}@media print{.css-5poeop{position:absolute;}}</style><nav class="MuiPaper-root MuiPaper-elevation MuiPaper-elevation4 MuiAppBar-root MuiAppBar-colorPrimary MuiAppBar-positionFixed mui-fixed css-5poeop" style="background-color:white"><style data-emotion="css i6s8oy">.css-i6s8oy{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding-left:16px;padding-right:16px;min-height:56px;}@media (min-width:600px){.css-i6s8oy{padding-left:24px;padding-right:24px;}}@media (min-width:0px){@media (orientation: landscape){.css-i6s8oy{min-height:48px;}}}@media (min-width:600px){.css-i6s8oy{min-height:64px;}}</style><div class="MuiToolbar-root MuiToolbar-gutters MuiToolbar-regular css-i6s8oy"><a href="/blog/"><style data-emotion="css er9axy">.css-er9axy{text-align:center;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;font-size:1.5rem;padding:8px;border-radius:50%;overflow:visible;color:rgba(0, 0, 0, 0.54);-webkit-transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;margin-left:-12px;color:black;}.css-er9axy:hover{background-color:rgba(0, 0, 0, 0.04);}@media (hover: none){.css-er9axy:hover{background-color:transparent;}}.css-er9axy.Mui-disabled{background-color:transparent;color:rgba(0, 0, 0, 0.26);}</style><style data-emotion="css zo9a81">.css-zo9a81{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;text-align:center;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;font-size:1.5rem;padding:8px;border-radius:50%;overflow:visible;color:rgba(0, 0, 0, 0.54);-webkit-transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;margin-left:-12px;color:black;}.css-zo9a81::-moz-focus-inner{border-style:none;}.css-zo9a81.Mui-disabled{pointer-events:none;cursor:default;}@media print{.css-zo9a81{-webkit-print-color-adjust:exact;color-adjust:exact;}}.css-zo9a81:hover{background-color:rgba(0, 0, 0, 0.04);}@media (hover: none){.css-zo9a81:hover{background-color:transparent;}}.css-zo9a81.Mui-disabled{background-color:transparent;color:rgba(0, 0, 0, 0.26);}</style><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-edgeStart MuiIconButton-sizeMedium css-zo9a81" tabindex="0" type="button" aria-label="back"><style data-emotion="css vubbuv">.css-vubbuv{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentColor;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.5rem;}</style><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-vubbuv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ArrowBackIcon"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"></path></svg></button></a><style data-emotion="css 13ge1hf">.css-13ge1hf{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:500;font-size:1.25rem;line-height:1.6;letter-spacing:0.0075em;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}@media (min-width:600px){.css-13ge1hf{display:block;}}</style><div class="MuiTypography-root MuiTypography-h6 css-13ge1hf"><a style="color:black;font-family:Raleway;text-decoration:none" class="" href="/blog/">BLOG</a></div></div></nav><nav class="MuiBox-root css-0"><style data-emotion="css 12acf6p">.css-12acf6p{z-index:1200;}@media (min-width:0px){.css-12acf6p{display:block;}}@media (min-width:600px){.css-12acf6p{display:none;}}.css-12acf6p .MuiDrawer-paper{box-sizing:border-box;width:240px;}</style></nav></div></div><div class="p-4 md:px-16 md:py-8 lg:px-32"><h2 class="font-bold text-2xl">aws/config vs aws/credentials</h2><h6 class="text-md" style="color:#576366">9 May 2018</h6><h6 class="text-lg" style="color:#576366">Get it right</h6><div style="flex-direction:row;display:flex;margin-top:10px;font-size:14px;flex-wrap:wrap"><a style="margin-right:10px;background-color:rgba(255, 165, 2, 0.3);padding:5px;padding-left:8px;padding-right:8px;border-radius:6px;font-family:Raleway;text-decoration:none;color:#ffa502" class="font-medium" href="/tags/aws/">aws<!-- --> </a></div><hr class="my-8"/><div class="prose lg:prose-xl"><p>There are time when you have multiple AWS access keys and secrets.</p>
<p>Each key are able to access the AWS resources/services, depending on the given permissions.</p>
<p>Ideally those keys only have access to the resources that are needed, nothing more.</p>
<p>However, it might still happen that you are accessing the same services, but for different accounts.</p>
<p>Let say pushing files to S3 bucket, but instead of pushing to your work/company AWS account, you want to push it to your personal one.</p>
<p>So you want to make sure you are passing in the right configurations for the command.</p>
<h4>AWS Profile</h4>
<p>What you are looking for is AWS <em>profile</em> management. (I made that up, but you get the idea.)</p>
<p>You can have a quick look at your current profiles using this command.</p>
<pre><code class="undefined hljs"><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">cat</span> ~/.aws/config</span>
</code></pre>
<p>Well, to save you some typings, here&#x27;s mine.</p>
<pre><code class="undefined hljs"><span class="hljs-section">[default]</span>
<span class="hljs-attr">region</span> = ap-southeast-<span class="hljs-number">1</span>
<span class="hljs-attr">output</span> = text

<span class="hljs-section">[profile docker-repository]</span>
<span class="hljs-attr">region</span> = us-west-<span class="hljs-number">2</span>

<span class="hljs-section">[profile eb-cli]</span>
<span class="hljs-attr">aws_access_key_id</span> =
<span class="hljs-attr">aws_secret_access_key</span> =


<span class="hljs-section">[profile chinloong]</span>
<span class="hljs-attr">aws_access_key_id</span> =
<span class="hljs-attr">aws_secret_access_key</span> =
<span class="hljs-attr">region</span> = ap-southeast-<span class="hljs-number">1</span>
</code></pre>
<p>You guessed it right. <strong>default</strong> configurations will be used if no profile is spcified explicitly.</p>
<p>New profile can be created by following the pattern you can derived from the file.</p>
<p><code style="background-color:rgba(0,0,0,.04);padding-top:3px;padding-bottom:3px">[profile staging]</code></p>
<p>and passed it as an argument in the command as</p>
<p><code style="background-color:rgba(0,0,0,.04);padding-top:3px;padding-bottom:3px">--profile staging</code></p>
<p>For example:</p>
<p>I am trying to deploy files to S3 bucket to use it in static web hosting.</p>
<pre><code class="undefined hljs"><span class="hljs-string">s3-deploy</span> <span class="hljs-string">&#x27;./public/**&#x27;</span> <span class="hljs-built_in">--cwd</span> <span class="hljs-string">&#x27;./public/&#x27;</span> <span class="hljs-built_in">--profile</span> <span class="hljs-string">chinloong</span> <span class="hljs-built_in">--bucket</span> <span class="hljs-string">your-bucket-name</span> <span class="hljs-built_in">--deleteRemoved</span> <span class="hljs-built_in">--gzip</span>
</code></pre>
<p>Bad news is, it won&#x27;t work.</p>
<p>You will probably get:</p>
<pre><code class="undefined hljs">(<span class="hljs-keyword">node</span><span class="hljs-title">:82129</span>) UnhandledPromiseRejectionWarning: Upload error: CredentialsError: Missing credentials <span class="hljs-keyword">in</span> config (CredentialsError: Missing credentials <span class="hljs-keyword">in</span> config
</code></pre>
<h4>The missing part</h4>
<pre><code class="undefined hljs"><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">cat</span> ~/.aws/credentials</span>
</code></pre>
<p>Make sure these two configs are there.</p>
<pre><code class="undefined hljs">aws_access_key_id <span class="hljs-operator">=</span>
aws_secret_access_key <span class="hljs-operator">=</span>
</code></pre>
<p>Did I mentioned about the profile name?</p>
<p>Before I forgot, you can specify the profile name those configs are for.
But watchout for the missing <strong>profile</strong> word.</p>
<p>The full block looks like this. (Instead of <code style="background-color:rgba(0,0,0,.04);padding-top:3px;padding-bottom:3px">[profile staging]</code>)</p>
<pre><code class="undefined hljs">[staging]
aws_access_key_id <span class="hljs-operator">=</span>
aws_secret_access_key <span class="hljs-operator">=</span>
</code></pre>
<p>You are now good to go!</p>
<h4>Explanation</h4>
<p>So we have</p>
<pre><code class="undefined hljs">~<span class="hljs-regexp">/.aws/</span>config
</code></pre>
<p>and</p>
<pre><code class="undefined hljs">~<span class="hljs-regexp">/.aws/</span>credentials
</code></pre>
<p>In short, use</p>
<p><code style="background-color:rgba(0,0,0,.04);padding-top:3px;padding-bottom:3px">~/.aws/credentials</code> for sensitive config like your access key and secret.</p>
<p><code style="background-color:rgba(0,0,0,.04);padding-top:3px;padding-bottom:3px">~/.aws/config</code> for less sensitive config like <code style="background-color:rgba(0,0,0,.04);padding-top:3px;padding-bottom:3px">region=us-west-2</code> or <code style="background-color:rgba(0,0,0,.04);padding-top:3px;padding-bottom:3px">max_concurrent_requests=10</code></p>
<p>Hope that clears up things a bit for you! 😀</p>
<p>You can also set the profile as environment variable.</p>
<p><code style="background-color:rgba(0,0,0,.04);padding-top:3px;padding-bottom:3px">AWS_PROFILE=staging s3-deploy ...</code></p>
<p>Full explanation?</p>
<p>Read it here. <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-config-files.html">https://docs.aws.amazon.com/cli/latest/userguide/cli-config-files.html</a></p>
<p>and here <a href="https://docs.aws.amazon.com/cli/latest/topic/config-vars.html">https://docs.aws.amazon.com/cli/latest/topic/config-vars.html</a></p></div></div><footer class="p-4 md:p-8 lg:p-16"><div class=""><h4 class="text-xl mb-4">Contact me via:</h4><a href="https://www.linkedin.com/in/chinloongtan" target="_blank" rel="noopener noreferrer" style="color:white" class="flex items-center"><span style="width:45px;font-size:35px;color:white" aria-hidden="true" class="fa fa-linkedin-square"></span>chinloongtan</a><div class="" style="margin-bottom:0;color:white"><a href="mailto:me@chinloongtan.com?body=Hi Chin Loong,
" style="color:white" class="flex items-center"><span style="width:45px;font-size:30px;color:white;margin-top:15px;margin-bottom:15px" aria-hidden="true" class="fa fa-envelope-open-o"></span>me@chinloongtan.com</a></div></div><div class="mt-6 md:mt-16"><h4 class="text-xl mb-4">Or Buy Me A Coffee:</h4><a href="https://www.buymeacoffee.com/chinloongtan" target="_blank" rel="noopener noreferrer" style="color:white" class="flex items-center"><span style="width:45px;font-size:30px;color:white" aria-hidden="true" class="fa fa-coffee"></span>chinloongtan</a></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"content":"\nThere are time when you have multiple AWS access keys and secrets.\n\nEach key are able to access the AWS resources/services, depending on the given permissions.\n\nIdeally those keys only have access to the resources that are needed, nothing more.\n\nHowever, it might still happen that you are accessing the same services, but for different accounts.\n\nLet say pushing files to S3 bucket, but instead of pushing to your work/company AWS account, you want to push it to your personal one.\n\nSo you want to make sure you are passing in the right configurations for the command.\n\n#### AWS Profile\n\nWhat you are looking for is AWS *profile* management. (I made that up, but you get the idea.)\n\nYou can have a quick look at your current profiles using this command.\n\n```\n$ cat ~/.aws/config\n```\n\nWell, to save you some typings, here's mine.\n\n```\n[default]\nregion = ap-southeast-1\noutput = text\n\n[profile docker-repository]\nregion = us-west-2\n\n[profile eb-cli]\naws_access_key_id =\naws_secret_access_key =\n\n\n[profile chinloong]\naws_access_key_id =\naws_secret_access_key =\nregion = ap-southeast-1\n```\n\nYou guessed it right. **default** configurations will be used if no profile is spcified explicitly.\n\nNew profile can be created by following the pattern you can derived from the file.\n\n`[profile staging]`\n\n\nand passed it as an argument in the command as\n\n`--profile staging`\n\nFor example:\n\nI am trying to deploy files to S3 bucket to use it in static web hosting.\n\n```\ns3-deploy './public/**' --cwd './public/' --profile chinloong --bucket your-bucket-name --deleteRemoved --gzip\n```\n\nBad news is, it won't work.\n\nYou will probably get:\n\n```\n(node:82129) UnhandledPromiseRejectionWarning: Upload error: CredentialsError: Missing credentials in config (CredentialsError: Missing credentials in config\n```\n\n#### The missing part\n\n```\n$ cat ~/.aws/credentials\n```\n\nMake sure these two configs are there.\n\n```\naws_access_key_id =\naws_secret_access_key =\n```\n\nDid I mentioned about the profile name?\n\nBefore I forgot, you can specify the profile name those configs are for.\nBut watchout for the missing **profile** word.\n\n\nThe full block looks like this. (Instead of `[profile staging]`)\n\n```\n[staging]\naws_access_key_id =\naws_secret_access_key =\n```\n\nYou are now good to go!\n\n\n#### Explanation\n\nSo we have\n\n```\n~/.aws/config\n```\n\nand\n\n```\n~/.aws/credentials\n```\n\nIn short, use\n\n`~/.aws/credentials` for sensitive config like your access key and secret.\n\n\n`~/.aws/config` for less sensitive config like `region=us-west-2` or `max_concurrent_requests=10`\n\n\nHope that clears up things a bit for you! 😀\n\nYou can also set the profile as environment variable.\n\n```AWS_PROFILE=staging s3-deploy ...```\n\n\nFull explanation?\n\nRead it here. [https://docs.aws.amazon.com/cli/latest/userguide/cli-config-files.html](https://docs.aws.amazon.com/cli/latest/userguide/cli-config-files.html)\n\nand here [https://docs.aws.amazon.com/cli/latest/topic/config-vars.html](https://docs.aws.amazon.com/cli/latest/topic/config-vars.html)\n","frontmatter":{"path":"/blog/aws-config-vs-aws-credentials","date":"2018-05-09T00:41:02.962Z","title":"aws/config vs aws/credentials","excerpt":"Get it right","tags":["aws"]},"fullPath":"/Users/chinloong/makespace/chinloongtan-web/src/content/blog/2018/05/07-aws-config-vs-aws-credentials/index.md","timeToRead":2}},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"aws-config-vs-aws-credentials"},"buildId":"0YF2trXFA7_OjzYqoBEJO","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>