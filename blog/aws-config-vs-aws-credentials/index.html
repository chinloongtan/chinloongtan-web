<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/assets/favicon.png"/><meta name="keywords" content="react native, experienced, developer"/><title>Chin Loong Tan - aws/config vs aws/credentials</title><meta name="title" content="Chin Loong Tan - aws/config vs aws/credentials"/><meta name="description" content="Get it right"/><meta name="next-head-count" content="10"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><link rel="preload" href="/_next/static/css/92cf70c9f133e29b.css" as="style"/><link rel="stylesheet" href="/_next/static/css/92cf70c9f133e29b.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-266da34e2468c883.js" defer=""></script><script src="/_next/static/chunks/framework-73b8966a3c579ab0.js" defer=""></script><script src="/_next/static/chunks/main-292e4726b4fd03ef.js" defer=""></script><script src="/_next/static/chunks/pages/_app-0edbe059cdec2497.js" defer=""></script><script src="/_next/static/chunks/b2e984c5-52c564665cb02377.js" defer=""></script><script src="/_next/static/chunks/601-597bb24ff23733d9.js" defer=""></script><script src="/_next/static/chunks/518-ca43922f1257f114.js" defer=""></script><script src="/_next/static/chunks/675-7b1b173673ee7f53.js" defer=""></script><script src="/_next/static/chunks/822-73b2b093f701cb92.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-bc9aa5ce64cc99f7.js" defer=""></script><script src="/_next/static/Jz2-Vvk3EPSSH8uFBhucU/_buildManifest.js" defer=""></script><script src="/_next/static/Jz2-Vvk3EPSSH8uFBhucU/_ssgManifest.js" defer=""></script><style data-href="https://fonts.googleapis.com/css?family=Raleway:400,500,700&display=swap">@font-face{font-family:'Raleway';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptxg8zYS_SKggPN4iEgvnHyvveLxVvaorCIPrc.woff) format('woff')}@font-face{font-family:'Raleway';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptxg8zYS_SKggPN4iEgvnHyvveLxVvoorCIPrc.woff) format('woff')}@font-face{font-family:'Raleway';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptxg8zYS_SKggPN4iEgvnHyvveLxVs9pbCIPrc.woff) format('woff')}@font-face{font-family:'Raleway';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptug8zYS_SKggPNyCAIT4ttDfCmxA.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Raleway';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptug8zYS_SKggPNyCkIT4ttDfCmxA.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Raleway';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptug8zYS_SKggPNyCIIT4ttDfCmxA.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Raleway';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptug8zYS_SKggPNyCMIT4ttDfCmxA.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Raleway';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptug8zYS_SKggPNyC0IT4ttDfA.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Raleway';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptug8zYS_SKggPNyCAIT4ttDfCmxA.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Raleway';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptug8zYS_SKggPNyCkIT4ttDfCmxA.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Raleway';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptug8zYS_SKggPNyCIIT4ttDfCmxA.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Raleway';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptug8zYS_SKggPNyCMIT4ttDfCmxA.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Raleway';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptug8zYS_SKggPNyC0IT4ttDfA.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Raleway';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptug8zYS_SKggPNyCAIT4ttDfCmxA.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Raleway';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptug8zYS_SKggPNyCkIT4ttDfCmxA.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Raleway';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptug8zYS_SKggPNyCIIT4ttDfCmxA.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Raleway';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptug8zYS_SKggPNyCMIT4ttDfCmxA.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Raleway';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v28/1Ptug8zYS_SKggPNyC0IT4ttDfA.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body><div id="__next"><div class="blog-post-container content"><nav class="bg-white fixed top-0 left-0 w-full shadow flex items-center z-50" style="height:64px"><div class="relative flex-1 flex"><button type="button" class="p-4"><svg viewBox="0 0 24 24" style="width:1.5rem;height:1.5rem" role="presentation"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" style="fill:currentColor"></path></svg></button><div class="flex flex-1 text-xl font-medium items-center"><a href="/blog" class="">BLOG</a></div></div><div class="hidden md:hidden absolute bg-white w-full" style="top:64px"><a href="https://mvphub.app/" target="_blank" class="px-4 py-2 block">SHOP</a><a href="/blog" target="_self" class="px-4 py-2 block">BLOG</a><a href="/about" target="_self" class="px-4 py-2 block">ABOUT</a></div></nav><div class="p-4 md:px-16 md:py-8 lg:px-32"><h2 class="font-bold text-2xl">aws/config vs aws/credentials</h2><h6 class="text-md" style="color:#576366">9 May 2018</h6><h6 class="text-lg" style="color:#576366">Get it right</h6><div style="flex-direction:row;display:flex;margin-top:10px;font-size:14px;flex-wrap:wrap"><a style="margin-right:10px;background-color:rgba(255, 165, 2, 0.3);padding:5px;padding-left:8px;padding-right:8px;border-radius:6px;font-family:Raleway;text-decoration:none;color:#ffa502" class="font-medium" href="/tags/aws/">aws<!-- --> </a></div><hr class="my-8"/><div class="prose lg:prose-xl"><p>There are time when you have multiple AWS access keys and secrets.</p>
<p>Each key are able to access the AWS resources/services, depending on the given permissions.</p>
<p>Ideally those keys only have access to the resources that are needed, nothing more.</p>
<p>However, it might still happen that you are accessing the same services, but for different accounts.</p>
<p>Let say pushing files to S3 bucket, but instead of pushing to your work/company AWS account, you want to push it to your personal one.</p>
<p>So you want to make sure you are passing in the right configurations for the command.</p>
<h4>AWS Profile</h4>
<p>What you are looking for is AWS <em>profile</em> management. (I made that up, but you get the idea.)</p>
<p>You can have a quick look at your current profiles using this command.</p>
<pre><code class="undefined hljs"><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">cat</span> ~/.aws/config</span>
</code></pre>
<p>Well, to save you some typings, here&#x27;s mine.</p>
<pre><code class="undefined hljs"><span class="hljs-section">[default]</span>
<span class="hljs-attr">region</span> = ap-southeast-<span class="hljs-number">1</span>
<span class="hljs-attr">output</span> = text

<span class="hljs-section">[profile docker-repository]</span>
<span class="hljs-attr">region</span> = us-west-<span class="hljs-number">2</span>

<span class="hljs-section">[profile eb-cli]</span>
<span class="hljs-attr">aws_access_key_id</span> =
<span class="hljs-attr">aws_secret_access_key</span> =


<span class="hljs-section">[profile chinloong]</span>
<span class="hljs-attr">aws_access_key_id</span> =
<span class="hljs-attr">aws_secret_access_key</span> =
<span class="hljs-attr">region</span> = ap-southeast-<span class="hljs-number">1</span>
</code></pre>
<p>You guessed it right. <strong>default</strong> configurations will be used if no profile is spcified explicitly.</p>
<p>New profile can be created by following the pattern you can derived from the file.</p>
<p><code style="background-color:rgba(0,0,0,.04);padding-top:3px;padding-bottom:3px">[profile staging]</code></p>
<p>and passed it as an argument in the command as</p>
<p><code style="background-color:rgba(0,0,0,.04);padding-top:3px;padding-bottom:3px">--profile staging</code></p>
<p>For example:</p>
<p>I am trying to deploy files to S3 bucket to use it in static web hosting.</p>
<pre><code class="undefined hljs"><span class="hljs-string">s3-deploy</span> <span class="hljs-string">&#x27;./public/**&#x27;</span> <span class="hljs-built_in">--cwd</span> <span class="hljs-string">&#x27;./public/&#x27;</span> <span class="hljs-built_in">--profile</span> <span class="hljs-string">chinloong</span> <span class="hljs-built_in">--bucket</span> <span class="hljs-string">your-bucket-name</span> <span class="hljs-built_in">--deleteRemoved</span> <span class="hljs-built_in">--gzip</span>
</code></pre>
<p>Bad news is, it won&#x27;t work.</p>
<p>You will probably get:</p>
<pre><code class="undefined hljs">(<span class="hljs-keyword">node</span><span class="hljs-title">:82129</span>) UnhandledPromiseRejectionWarning: Upload error: CredentialsError: Missing credentials <span class="hljs-keyword">in</span> config (CredentialsError: Missing credentials <span class="hljs-keyword">in</span> config
</code></pre>
<h4>The missing part</h4>
<pre><code class="undefined hljs"><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">cat</span> ~/.aws/credentials</span>
</code></pre>
<p>Make sure these two configs are there.</p>
<pre><code class="undefined hljs">aws_access_key_id <span class="hljs-operator">=</span>
aws_secret_access_key <span class="hljs-operator">=</span>
</code></pre>
<p>Did I mentioned about the profile name?</p>
<p>Before I forgot, you can specify the profile name those configs are for.
But watchout for the missing <strong>profile</strong> word.</p>
<p>The full block looks like this. (Instead of <code style="background-color:rgba(0,0,0,.04);padding-top:3px;padding-bottom:3px">[profile staging]</code>)</p>
<pre><code class="undefined hljs">[staging]
aws_access_key_id <span class="hljs-operator">=</span>
aws_secret_access_key <span class="hljs-operator">=</span>
</code></pre>
<p>You are now good to go!</p>
<h4>Explanation</h4>
<p>So we have</p>
<pre><code class="undefined hljs">~<span class="hljs-regexp">/.aws/</span>config
</code></pre>
<p>and</p>
<pre><code class="undefined hljs">~<span class="hljs-regexp">/.aws/</span>credentials
</code></pre>
<p>In short, use</p>
<p><code style="background-color:rgba(0,0,0,.04);padding-top:3px;padding-bottom:3px">~/.aws/credentials</code> for sensitive config like your access key and secret.</p>
<p><code style="background-color:rgba(0,0,0,.04);padding-top:3px;padding-bottom:3px">~/.aws/config</code> for less sensitive config like <code style="background-color:rgba(0,0,0,.04);padding-top:3px;padding-bottom:3px">region=us-west-2</code> or <code style="background-color:rgba(0,0,0,.04);padding-top:3px;padding-bottom:3px">max_concurrent_requests=10</code></p>
<p>Hope that clears up things a bit for you! ðŸ˜€</p>
<p>You can also set the profile as environment variable.</p>
<p><code style="background-color:rgba(0,0,0,.04);padding-top:3px;padding-bottom:3px">AWS_PROFILE=staging s3-deploy ...</code></p>
<p>Full explanation?</p>
<p>Read it here. <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-config-files.html">https://docs.aws.amazon.com/cli/latest/userguide/cli-config-files.html</a></p>
<p>and here <a href="https://docs.aws.amazon.com/cli/latest/topic/config-vars.html">https://docs.aws.amazon.com/cli/latest/topic/config-vars.html</a></p></div></div><footer class="p-4 md:p-8 lg:p-16"><div class=""><h4 class="text-xl mb-4">Contact me via:</h4><a href="https://www.linkedin.com/in/chinloongtan" target="_blank" rel="noopener noreferrer" style="color:white" class="flex items-center"><div class="w-12"><svg viewBox="0 0 24 24" style="width:2.25rem;height:2.25rem" role="presentation"><path d="M19 3A2 2 0 0 1 21 5V19A2 2 0 0 1 19 21H5A2 2 0 0 1 3 19V5A2 2 0 0 1 5 3H19M18.5 18.5V13.2A3.26 3.26 0 0 0 15.24 9.94C14.39 9.94 13.4 10.46 12.92 11.24V10.13H10.13V18.5H12.92V13.57C12.92 12.8 13.54 12.17 14.31 12.17A1.4 1.4 0 0 1 15.71 13.57V18.5H18.5M6.88 8.56A1.68 1.68 0 0 0 8.56 6.88C8.56 5.95 7.81 5.19 6.88 5.19A1.69 1.69 0 0 0 5.19 6.88C5.19 7.81 5.95 8.56 6.88 8.56M8.27 18.5V10.13H5.5V18.5H8.27Z" style="fill:currentColor"></path></svg></div>chinloongtan</a><div class="" style="margin-bottom:0;color:white"><a href="mailto:me@chinloongtan.com?body=Hi Chin Loong,
" style="color:white" class="flex items-center"><div class="w-12"><svg viewBox="0 0 24 24" style="width:2.25rem;height:2.25rem" role="presentation"><path d="M22 6C22 4.9 21.1 4 20 4H4C2.9 4 2 4.9 2 6V18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V6M20 6L12 11L4 6H20M20 18H4V8L12 13L20 8V18Z" style="fill:currentColor"></path></svg></div>me@chinloongtan.com</a></div></div><div class="mt-6 md:mt-16"><h4 class="text-xl mb-4">Or Buy Me A Coffee:</h4><a href="https://www.buymeacoffee.com/chinloongtan" target="_blank" rel="noopener noreferrer" style="color:white" class="flex items-center"><div class="w-12"><svg viewBox="0 0 24 24" style="width:2.25rem;height:2.25rem" role="presentation"><path d="M2,21V19H20V21H2M20,8V5H18V8H20M20,3A2,2 0 0,1 22,5V8A2,2 0 0,1 20,10H18V13A4,4 0 0,1 14,17H8A4,4 0 0,1 4,13V3H20M16,5H6V13A2,2 0 0,0 8,15H14A2,2 0 0,0 16,13V5Z" style="fill:currentColor"></path></svg></div>chinloongtan</a></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"content":"\nThere are time when you have multiple AWS access keys and secrets.\n\nEach key are able to access the AWS resources/services, depending on the given permissions.\n\nIdeally those keys only have access to the resources that are needed, nothing more.\n\nHowever, it might still happen that you are accessing the same services, but for different accounts.\n\nLet say pushing files to S3 bucket, but instead of pushing to your work/company AWS account, you want to push it to your personal one.\n\nSo you want to make sure you are passing in the right configurations for the command.\n\n#### AWS Profile\n\nWhat you are looking for is AWS *profile* management. (I made that up, but you get the idea.)\n\nYou can have a quick look at your current profiles using this command.\n\n```\n$ cat ~/.aws/config\n```\n\nWell, to save you some typings, here's mine.\n\n```\n[default]\nregion = ap-southeast-1\noutput = text\n\n[profile docker-repository]\nregion = us-west-2\n\n[profile eb-cli]\naws_access_key_id =\naws_secret_access_key =\n\n\n[profile chinloong]\naws_access_key_id =\naws_secret_access_key =\nregion = ap-southeast-1\n```\n\nYou guessed it right. **default** configurations will be used if no profile is spcified explicitly.\n\nNew profile can be created by following the pattern you can derived from the file.\n\n`[profile staging]`\n\n\nand passed it as an argument in the command as\n\n`--profile staging`\n\nFor example:\n\nI am trying to deploy files to S3 bucket to use it in static web hosting.\n\n```\ns3-deploy './public/**' --cwd './public/' --profile chinloong --bucket your-bucket-name --deleteRemoved --gzip\n```\n\nBad news is, it won't work.\n\nYou will probably get:\n\n```\n(node:82129) UnhandledPromiseRejectionWarning: Upload error: CredentialsError: Missing credentials in config (CredentialsError: Missing credentials in config\n```\n\n#### The missing part\n\n```\n$ cat ~/.aws/credentials\n```\n\nMake sure these two configs are there.\n\n```\naws_access_key_id =\naws_secret_access_key =\n```\n\nDid I mentioned about the profile name?\n\nBefore I forgot, you can specify the profile name those configs are for.\nBut watchout for the missing **profile** word.\n\n\nThe full block looks like this. (Instead of `[profile staging]`)\n\n```\n[staging]\naws_access_key_id =\naws_secret_access_key =\n```\n\nYou are now good to go!\n\n\n#### Explanation\n\nSo we have\n\n```\n~/.aws/config\n```\n\nand\n\n```\n~/.aws/credentials\n```\n\nIn short, use\n\n`~/.aws/credentials` for sensitive config like your access key and secret.\n\n\n`~/.aws/config` for less sensitive config like `region=us-west-2` or `max_concurrent_requests=10`\n\n\nHope that clears up things a bit for you! ðŸ˜€\n\nYou can also set the profile as environment variable.\n\n```AWS_PROFILE=staging s3-deploy ...```\n\n\nFull explanation?\n\nRead it here. [https://docs.aws.amazon.com/cli/latest/userguide/cli-config-files.html](https://docs.aws.amazon.com/cli/latest/userguide/cli-config-files.html)\n\nand here [https://docs.aws.amazon.com/cli/latest/topic/config-vars.html](https://docs.aws.amazon.com/cli/latest/topic/config-vars.html)\n","frontmatter":{"path":"/blog/aws-config-vs-aws-credentials","date":"2018-05-09T00:41:02.962Z","title":"aws/config vs aws/credentials","excerpt":"Get it right","tags":["aws"]},"fullPath":"/Users/chinloong/makespace/chinloongtan-web/src/content/blog/2018/05/07-aws-config-vs-aws-credentials/index.md","timeToRead":2}},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"aws-config-vs-aws-credentials"},"buildId":"Jz2-Vvk3EPSSH8uFBhucU","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>